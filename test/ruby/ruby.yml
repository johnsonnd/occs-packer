---

- hosts: all
  gather_facts: true
  become: true

  vars:
    ruby_version: "2.3"
    ruby_devel: True
    appadmin_include_ruby: yes
    appadmin_ruby_path: /opt/rh/rh-ruby23/enable

    awslogs_region: us-east-1
    awslogs_logs:
     - file: /var/log/httpd/access_log
       format: "%d/%b/%Y:%H:%M:%S %z"
       time_zone: "UTC"
       initial_position: "end_of_file"
       group_name: Apache-Logs
       stream_name: access-logs

     - file: /var/log/httpd/error_log
       format: "%d %b %y %H:%M:%S.%f"
       time_zone: "UTC"
       initial_position: "end_of_file"
       group_name: Apache-Logs
       stream_name: error-logs

  roles:
    # Test roles for ruby AMI
    - occsab-appadmin
    - occsab-httpd
    - occsab-passenger
    - occsab-ruby
    - ansible-awslogs
